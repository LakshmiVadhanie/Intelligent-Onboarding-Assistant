Video: UX: RBAC permissions mapping exercise - CI/CD
Video ID: mg3ZFGB8jTg
URL: https://www.youtube.com/watch?v=mg3ZFGB8jTg
================================================================================

 Cool, so thanks everyone for joining. I wanted to get in touch with all of y'all because I am working on a project with the permissions. Some of you may have already seen the work that I've been doing. A couple of y'all have already provided feedback, so that's great. Let's start with this real quick. So just a brief overview in case you're not familiar. I've been working with Amelia and Andy on redoing the entire permissions architecture of the platform based off of the idea that we're going to make. Customizable permissions. And so had Amelia had gone through and the first round of organizing the permissions based off of what they have here in our documentation. So we're going to be working on this table here. So, you know, analytics would be grouped as one. And then we would try and find out where does clusters be gone to what is a container registry, et cetera. So that was the first pass at it after we had started looking at some of this. As an example, where if I were to look at a individual permission called view project code, and I was to disable this permission. If we were not looking at what it links to, which is look at this table was like, well, individually doesn't do anything, but logically in the platform, it would turn off all of these other permissions without noticing. So what I've done is I've gone through and mapped all of the permissions to try and see if I can find these sorts of mappings and tied to this issue specifically. The devs are looking at consolidating this permission to view pipeline and view pipeline details. But instead of it being two permissions is just one. Kind of like consolidating line items here in this table or the same thing here. The idea is that if we're going to move forward with having a prototype where an admin can go and toggle individual features. And then we're going to try and minimize this complexity that can help on the back end with the problem that they describe here that they would have. There wouldn't be a need for overlapping or redundant permission. So in the case of here they have the same access level. We wouldn't be less confusion here and then it would make things easier to undo or to make changes within the code based without being so catastrophic towards like if you allow something that they shouldn't have access to they wouldn't necessarily cause any sort of negative impact in the in that sort of permission if you were to enable that permission right. So the reason I need y'all to sync with me today is to kind of go over this. Vitiga and Gina have already kind of looked at this a bit. And I think it's more or less okay. But I just wanted to kind of go through as part of this work that I'm doing here where I go through the entire. Permissions architecture and meet with every team that kind of has insider impact with this to make sure that I'm thinking of everything in this model and then also see if there's opportunities to merge or group things that don't necessarily need to exist individually. And so with that I will open the discussion for anyone who wants to kind of jump in and provide feedback. The first question from me Daniel is like what is the basis of consolidating I you thinking of in terms of page access or is it associated the primary permission is dissociated from the page access and something and entity of its own. So the idea would be specifically in this case where view pipeline page and view pipeline details page the question presents itself why are these separate what is the use case or the job to be done to have them independent independent permissions. So if there isn't a real realistic or definitive purpose for them being separate, then can we merge those the benefit is that it reduces the code. The amount of code that we have and reduces things that are it's touching. So kind of improves the security and that instead of having to watch or monitor to code code points you actually just looking at one. Then that sort of logic would apply to the whole project that I'm working on right. So minimizing the code base or reducing it in terms of complexity, as well as what sort of improvement that'll present on the front end where an admin doesn't necessarily have to talk to these features and you just toggle one. Instead of and receiving instead of two and then make it simpler for them reducing the UI. So one thing that I just noticed in the link that I just shared is just a list of permissions which are specific to pipelines on the docs. And while looking at this table, if you see the we have separated out view pipeline details page view pipeline page and view pipeline tab in MR. And when I kind of cross checked that with the documentation that I have in my personal excel sheet, the only difference that I see between accessing the pipeline list view versus the pipeline tab in merge request is that guests cannot access the pipelines in a merge request. So that's something that I think we should also cross check with the team if there is a possibility to consolidate that with these two permissions that you just talked about. Unless there's a very compelling case of not allowing guests to visit that particular tab in a merge request, but at the same time be able to look at the pipeline list view. Well, so one thing I guess I should probably clarify is that this change doesn't necessarily have any reflection on guest reporter developer maintainer owner. The idea being is that as an admin, I can then customize all of these to offer those individual permissions. So if a guest only had access to one particular permission, I could then enable that they would no longer be a guest. So any sort of restriction that you're seeing by a nonmember or a guest not having access to that doesn't necessarily play into this particular problem, I don't think. Apart from what do they have currently and can I enable or disable that the idea being that an admin would then give custom feature or custom access to something. The impetus for the project is our permissions are either too permissive or too restrictive. So if somebody can come in here and say I want to guest role, but I'm going to also give them permission to run a pipeline. And disable all the other things that could be possible. But we're looking more so is that any sort of problems that might arise by making those changes by if I do allow that does any sort of security concern arise or again going back to the idea of merging stuff. If I merge a particular permission does that have impact elsewhere. In that case, I think it definitely makes a lot of sense to kind of treat the pipeline tab and merge request in the same way as we treat list view. The only thing that I don't think I have the I've complete knowledge to comment on is how that plays with the access to merge request page. Because eventually like the same pipelines are also going to appear on the pipeline list view. So if somebody is able to view that then this should also be able to view this is just presenting the pipeline list view in a context in the context of a particular merge request. Yeah, I guess that's also something where I was looking for your knowledge is that so as it's grouped so far, we're just looking at the CICD screen, but it doesn't necessarily just stop there, right. So it touches merge requests and you know parts of the repo right. So are there connections there that I'm not linking correctly because they're in these little boxes right should this be a more. I'm connected prototype or not prototype but I'm connected mapping here. Right. So I mean, I'm just thinking of this hypothetical scenario that. So I'm going to add a possibility that I might as a user be given access to view pipelines but not take part in merge requests. That's possible that's the the whole idea of that if an admin wanted to create that custom role or custom policy, then we would offer that ability. And how would that play out if I still have access to like if I if I can still view all the pipelines. Just that not through that particular location. Right, and that's exactly where I'm like thinking, okay, what sort of problems does that create like like the one I used here view project code is like well, I turn that off but then everything else below that should turn off as well. Yeah. So if you don't have access to merger quest, you shouldn't have. No, but you should. Yeah, you shouldn't have view pipelines tab in MRs right that would just automatically be shut off because. Okay, so that's kind of what I'm wondering is that if you would be able to see merger quests or if you don't have merger quests, you wouldn't be able to see pipelines. No, I don't think so. I think the whole magic if if I'm not allowed to look at merge requests, then of course I cannot access that page and the tab is. And even not going to be available to me. But I don't think that impacts pipelines page by itself right that would be a separate permission. Yeah, it's separate that's what. So I don't understand. If you if you can't access pipelines though, can you access jobs because I was wondering what the difference between the pipelines list page and the details pages and I'm wondering if it's because the details shows the jobs within a pipeline and sometimes. And specific users can't see the jobs because they contain whatever sensitive data. That's a question that we should ask back an engineer that if if there's a let's say if there's. And then we can ask us asked like compliance related jobs that are running as a part of pipeline are they inheriting the same access as the parent pipeline or can that be controlled. So my assumption was like you look here. At the pipelines and then look at the pipeline detail. And then we can see that no, this is the comic page commit. Of course. That's the thing is that where is the detail shown. Would that be in the MR. This is the detail here. Okay. So this would be. Yeah. And the list you can see like there's a list of jobs down there too. And it's on tab that. And then you could like view jobs but technically I guess you could do that from the pipeline mini the little mini graphs. As well. Yes. I mean here. I'm sorry. For. Yeah. Like the list view pipeline. Yeah. Here's. Yeah. So it's kind of tied if you're able to view pipelines and view the pipeline details and just view pipelines you can also view the jobs and job details. Okay. So this sort of all these screens then need to be looked at as a linked. Linking from all of this right it's not just independent. Time back to here. Okay. Right. And that's kind of what I'm also curious is if you were to disable that what does it look like. And then you can see that the list of the items that you can see from the UI is basically just disappear these can these navigation items against. That's how we are handling thing right now. I mean we've just basic permissions right if you just don't have access. Nothing will appear right. This tab would go away. And this theoretically would go away. I don't think that goes away. That ever goes away. And then the one who has access to the merge request has access to the pipeline widget. There is one restriction that they cannot run a pipeline. If the pipeline fails, but I think recently we made a change that if a pipeline fails. Developers should have access to the run pipeline button which is inside the pipeline step. And then we can see that the pipeline is in. Let's see where it's a pipeline here. Yeah. So this one. Yeah. Oh, that's oddly placed. Okay. That was not available. I think to non maintainers if I'm not wrong, I'll check. I don't think that's possible. I think you're right. Okay. Well, I mean, so right now, I am not a maintainer on the Git Lab project, I don't think so. Yeah. Yeah. I could probably push it but I don't want to. It's okay. Yeah. I don't know. If that. You're saying that should not be that way. issue. Anyway, what I'm thinking is like, let's say if I don't have access to this merge request, would these pipelines not be visible to me on the pipeline list view as well? Because they are there as well. That doesn't happen today, I think. Right. So that's where I'm curious is that what amount of data would be visual. So like you wouldn't see the MR. But for some reason, you could see you could see the pipelines, if for some reason they were turned on, but you just couldn't see this content and maybe the changes and the commits. What would that information help? What would someone use that just the commits pipelines and changes for an MR? I'm just wondering if it even makes sense to just show those without the actual MR description and everything. So I'm thinking, let me jump in real quick because I want to make sure I'm understanding. I think this might just be a bad example where an admin would disable that or enable that to allow that sort of flexibility or to to prevent seeing something here. I would look at it more holistically across the platform as like saying, is there something that would negatively impact it? The example we're using I think is a fair example, but it might be like an outlier case. Right. I think the more relevant example might be, I don't want an external contributor to see code, but they can look at the merger quest and where's the merger quest real quick. It's a thing of a matter of security perspective, whereas I want a contributor, but I don't want them looking at something potentially problematic. And so, disabling pipeline might not be an example. Valid, but it is the one that they're working on. Where was that issue? I lost the issue. Here it is. Where they want to merge these two. Yeah. Okay. I think for me that the problem is I'm more afraid of what happens when they go to something that is actually more likely to be played with and disabled. I think that might be why they're going after this one in particular, because it probably nobody's an immeasurable with that. Like there's no reason to disable this. Right. But this would be these two are available for every level. Right. Guest has access to this. Yes. Okay. Yeah. So I think that might have been why they chose is because it's super low impact. Right. But jobs, like permission for jobs are definitely tied to these. So if somebody has access to view pipeline, they can definitely look at the job details and job list. Mm-hmm. Okay. So I think what I want to do next is talk with my engineers and ask them, what do they see impact wise from that outlying example. If somebody did for some reason, disable that permission, what does that look like in this case? Because I'm not exactly certain how that works because as you described, it won't just be contained to this pipeline's page. It actually goes all the way back to the merge request and this whole screen. Am I understanding correct? That's correct. So like out of the 12 trigger sources for that initiative pipeline, commit is I think one of them and commit is again related to the changes and like for security purpose, if the changes have to be hidden from someone, what happens to the pipeline permission? Mm-hmm. Okay. One other thing to throw in there, it's not fully live yet. It's only enabled for this project, for GitLab projects, but if you go to CI-CD, we also have artifacts now. And that depends on jobs and pipelines. So it's like the way that I was just saying, if you don't have access to a pipeline, you don't have access to the jobs, then you also won't have access to the artifacts. Gotcha. There's like a whole tree. Yeah. So I guess that's something that I need help with over here is can you help and fix this tree with me to make sure that the links look correct from your perspective? So I think that's my ask for the team is that just double check what I have so far and make new links or break links as you see relevant to your group. And then also just feel free to note or call out anything that might be weird or problematic and we can talk about it async. And like I said, I'm also going to pass us through with the devs so they can see what we're talking about in our concerns. Okay. Okay. We can do that. For runners. Now that I'm just looking at this, is I never even know add add runners to namespace is an existing permission? Sorry. Come again, Gina. I think so. Let me find it. No, only six links. It says add specific run into product. It's listed. Yeah. Okay. Oh, yeah. Product will be in namespace. It's limited to owners and maintainers. Yeah. Okay. I'm just trying to think about all the things. I'm going to think about it a little bit more runners are like the permissions are so complicated. So I'm going to take a closer look into into that. Cool. So yeah, this is hopefully been helpful. And I hope I have explained what I'm trying to do correctly. I guess if you'll have any other feedback for the meeting today, I don't want to I don't want to keep you longer than our schedule. Okay. Cool. So then yeah, like I said, when you have opportunity, please add some changes here or links that I'm missing that you think should belong here, especially like across these sorts of features. I think that's mostly where I'm lacking is where they touch across the platform. There's definitely an overlap with security and compliance and the create features. I mean that and also package, I guess. Yeah, my assumption was there should be a lot more links, but that's kind of what I was hoping to have these chats with everyone to see which ones I'm missing. Yeah. Awesome. Well, thanks everyone. I appreciate your time and it was super helpful for me and I'm glad I could catch everyone in the same time slot. I hope I could keep anyone up too late or wake anybody up too early. Cool. Thanks again. Good to see y'all. Have a good day.