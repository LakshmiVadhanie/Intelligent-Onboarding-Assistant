{
  "content": "Managing GitLab at scale requires strategic object storage configuration.\nHere's how to configure object storage for maximum performance, security,\nand reliability across your GitLab components.\nUse consolidated form for GitLab components\nFor artifacts, LFS, uploads, packages, and other GitLab data, eliminate credential duplication with the consolidated form:\ngitlab_rails['object_store']['enabled'] = true\ngitlab_rails['object_store']['connection'] = {\n'provider' => 'AWS',\n'region' => 'us-east-1',\n'use_iam_profile' => true\n}\ngitlab_rails['object_store']['objects']['artifacts']['bucket'] = 'gitlab-artifacts'\ngitlab_rails['object_store']['objects']['lfs']['bucket'] = 'gitlab-lfs'\n# ... additional buckets for each object type\nThis reduces complexity while enabling encrypted S3 buckets and proper Content-MD5 headers.\nConfigure container registry separately\nThe container registry requires its own configuration since it doesn't support the consolidated form:\nregistry['storage'] = {\n's3_v2' => {  # Use the new v2 driver\n'bucket' => 'gitlab-registry',\n'region' => 'us-east-1',\n# Omit access keys to use IAM roles\n}\n}\nNote:\nThe s3_v1 driver is deprecated and will be removed in GitLab 19.0. Migrate to s3_v2 for better performance and reliability.\nDisable proxy download for performance\nSet\nproxy_download\nto\nfalse\n(default) for direct downloads:\n# For GitLab objects - can be set globally\ngitlab_rails['object_store']['proxy_download'] = false\n# Or configure per bucket for granular control\ngitlab_rails['object_store']['objects']['artifacts']['proxy_download'] = false\ngitlab_rails['object_store']['objects']['lfs']['proxy_download'] = false\ngitlab_rails['object_store']['objects']['uploads']['proxy_download'] = true  # Example: keep proxy for uploads\n# Container registry defaults to redirect mode (direct downloads)\n# Only disable if your environment requires it:\nregistry['storage']['redirect']['disable'] = false  # Keep as false\nImportant:\nThe\nproxy_download\noption can be configured globally at the object-store level or individually per bucket. This gives you flexibility to optimize based on your specific use case â for example, you might want direct downloads for large artifacts and LFS files, but proxy smaller uploads through GitLab for additional security controls.\nThis dramatically reduces server load and egress costs by letting clients download directly from object storage.\nChoose identity-based authentication\nAWS:\nUse IAM roles instead of access keys:\n# GitLab objects\ngitlab_rails['object_store']['connection'] = {\n'provider' => 'AWS',\n'use_iam_profile' => true\n}\n# Container registry\nregistry['storage'] = {\n's3_v2' => {\n'bucket' => 'gitlab-registry',\n'region' => 'us-east-1'\n# No access keys = IAM role authentication\n}\n}\nGoogle Cloud Platform:\nEnable application default credentials:\ngitlab_rails['object_store']['connection'] = {\n'provider' => 'Google',\n'google_application_default' => true\n}\nAzure:\nUse workload identities by omitting storage access keys.\nAdd encryption layers\nEnable server-side encryption for additional security:\n# GitLab objects\ngitlab_rails['object_store']['storage_options'] = {\n'server_side_encryption' => 'AES256'\n}\n# Container registry\nregistry['storage'] = {\n's3_v2' => {\n'bucket' => 'gitlab-registry',\n'encrypt' => true\n}\n}\nFor AWS KMS encryption, specify the key ARN in\nserver_side_encryption_kms_key_id\n.\nUse separate buckets for organization\nCreate dedicated buckets for each component:\ngitlab-artifacts\n- CI/CD job artifacts\ngitlab-lfs\n- Git LFS objects\ngitlab-uploads\n- User uploads\ngitlab-packages\n- Package registry\ngitlab-registry\n- Container images\nThis isolation improves security, enables granular access controls, and simplifies cost tracking.\nKey configuration differences\nComponent\nConsolidated Form\nIdentity Auth\nEncryption\nDirect Downloads\nArtifacts, LFS, Packages\nâ Supported\nâ use_iam_profile\nâ storage_options\nâ proxy_download: false\nContainer Registry\nâ Separate config\nâ Omit access keys\nâ encrypt: true\nâ redirect enabled by default\nMigration path\nStart with GitLab objects:\nUse the consolidated form for immediate complexity reduction.\nConfigure registry separately:\nUse s3_v2 driver with IAM authentication.\nEnable encryption:\nAdd server-side encryption for both components.\nOptimize performance:\nEnsure direct downloads are enabled with appropriate\nproxy_download\nsettings.\nSet up lifecycle policies:\nConfigure S3 lifecycle rules to clean up incomplete multipart uploads.\nAdditional resources\nFor a complete AWS S3 configuration example, see the\nGitLab documentation on AWS S3 object storage setup\n.\nFor more details on configuring proxy_download parameters per bucket, refer to the\nGitLab object storage configuration documentation\n.\nThese configurations will scale with your growth while maintaining security and performance. The separation between GitLab object storage and container registry configurations reflects their different underlying architectures, but both benefit from the same optimization principles.",
  "metadata": {
    "title": "Optimize GitLab object storage for scale and performance",
    "url": "https://about.gitlab.com/blog/optimize-gitlab-object-storage-for-scale-and-performance/",
    "published": "2025-10-08T00:00:00.000Z",
    "updated": "2025-10-08T00:00:00.000Z",
    "author": "Tim Rizzi",
    "categories": [],
    "summary": "<p>Managing GitLab at scale requires strategic object storage configuration.</p>\n<p>Here's how to configure object storage for maximum performance, security,</p>\n<p>and reliability across your GitLab components.</p>\n<h2>Use consolidated form for GitLab components</h2>\n<p>For artifacts, LFS, uploads, packages, and other GitLab data, eliminate credential duplication with the consolidated form:</p>\n<pre><code>gitlab_rails['object_store']['enabled'] = true\n\ngitlab_rails['object_store']['connection']",
    "fetched_at": "2025-10-24T18:27:56.281782",
    "source": "gitlab_blog"
  },
  "processing": {
    "content_length": 5024,
    "word_count": 632,
    "is_relevant": true
  }
}